<!DOCTYPE html>
<html>
<head>
    <title>Moodboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }

        .video {
            /* Full height */
            height: 100vh;
            width: 100vw;

            /* Center and scale the image nicely */
            background-position: center;
            background-repeat: no-repeat;
            background-size: contain;
            background-color: black;
        }

        .content {
            color: lightgray;
            background-color: black;

            position: absolute;
            bottom: 0;
            left: 0;
            margin-left: 3vw;
            margin-bottom: 3vh;
            padding: 10px;

            border: ridge lightgray;

            font-size: x-large;
            font-weight: bold;
        }

        @media screen and (max-width: 600px) {
            .content {
                font-size: small;
            }
        }
    </style>
</head>
<body>

<video class="video" autoplay muted loop>
    <source src="{{.URL}}" type="video/mp4">
</video>

<div class="bg">
    <p class="content">MOOD: {{ StringJoin .Mood " " | ToUpper }}</p>
</div>

<script type="text/javascript">
    let initial = null;

    setInterval(async () => {
        const response = await fetch('//' + location.host + '/mood');
        const {mood} = await response.json();
        if (initial != null && JSON.stringify(mood) !== JSON.stringify(initial)) {
            location.reload();
        } else {
            initial = mood;
        }
    }, 1000);
</script>

</body>
</html>
